<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
	<head>
		<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
		<title>The Equinox Project - Dynamic plugins</title>
		<link rel="stylesheet" title="default" href="http://eclipse.org/default_style.css" type="text/css">
		<style>
			th,td { vertical-align:top; text-align=left}
			.issue { font-style:oblique; width:200px;}
			.box	{ background-color:#E0E0FF}
		</style>
	</head>
	<body>
		<table BORDER=0 CELLSPACING=5 CELLPADDING=2 WIDTH="100%" >
			<tr> 
				<td ALIGN=left width="60%">
					<p><font class=indextop> equinox</font><br>
					<font class=indexsub> dynamic plugins</font> </p>
				</td>
				<td WIDTH="40%">&nbsp; </td>
			</tr>
		</table>
		
		The <a href="currentPluginModel.html">current plugin model</a> is static and requires the platform to be stopped and restarted if plugins are installed, removed or updated. The DynamicPlugins effort seeks to allow the discovery of changes to the plugin registry on the fly. The main issues involved are: 
		<ul>
			<li><a href="deactivatingPlugins.html">deactivating plugins</a></li>
			<li><a href="dynamicRegistry.html">making a dynamic registry structure</a></li>
			<li>designing a flexible <a href="registryLifeCycle.html">registry life cycle</a> model to inform plugins that the registry has changed </li>
			<li>managing <a href="classloadersAndInstances.html">classloaders and loaded classes</a> </li>
		</ul>
		
		<p>Note that what appears in a grey background refers to the "old model".
		</p>
		<div width="100%" style="background-color:#0080C0;color=#FFFFFF"><b> State of the art</b></div>
		<p>There exists a number of technologies in the Java world that support
		concepts similar to dynamic plugins. The following table lists these technologies
		from an Equinox perspective.</p>
		<table style="border:black 1px solid">
			<tr style="">
				<th class="issue">Issue</th>
				<th style='width:180px'>OSGi</th>
				<th style='width:180px'>Avalon</th>
				<th style='width:180px'>JMX</th>
				<th style='width:180px'>Tomcat</th>
			</tr>
			<tr>
				<td class="issue">
					How are libraries shared?
				</td>
				<td class="box">
					Imported or exported packages are declared
					in the manifest. The Framework assures a single
					namespace for these packages. Sharing can be
					managed externally through "services".
				</td>
			</tr>
			<tr>
				<td class="issue">
					Plugin private libraries supported?
				</td>
				<td class="box">
					Yes
				</td>
			</tr>
			<tr>
				<td class="issue">
					Multiple versions of the same library?
				</td>
				<td class="box">
					Only as private libraries
				</td>
			</tr>
			<tr>
				<td class="issue">
					How are ClassCastExceptions prevented for shared
					objects?
				</td>
				<td class="box">
					Single shared namespace
				</td>
			</tr>
			<tr>
				<td class="issue">
					How are new/updated dynamic plugins discovered?
				</td>
				<td class="box">
					Plugins register an object in the service registry. Changes
					in the registry are send to listeners.
				</td>
			</tr>
			<tr>
				<td class="issue">
					What security model is provided?
				</td>
				<td class="box">
					J2SE security which permissions for registering
					services based on service interface name, and permission
					for importing/exporting packages. Extensible for
					domain resources.
				</td>
			</tr>
			<tr>
				<td class="issue">
					What is the delivery model?
				</td>
				<td class="box">
					A single JAR file with a number of manifest headers.
				</td>
			</tr>
			<tr>
				<td class="issue">
					Tooling support?
				</td>
				<td class="box">
					IBM and ProSyst have tools for 
					bundle development in Eclipse.
				</td>
			</tr>
			<tr>
				<td class="issue">
					Life Cycle primitives?
				</td>
				<td class="box">
					install, start, stop, update,
					uninstall
				</td>
			</tr>
			<tr>
				<td class="issue">
					Persistent data management?
				</td>
				<td class="box">
					Plugins have their private 
					storage area that is disposed off when they are 
					uninstalled
				</td>
			</tr>
			<tr>
				<td class="issue">
					Any issues with 5000 plugins?
				</td>
				<td class="box">
					An implementation
					should probably be optimized for this because it
					is not the "normal" configuration. There are many
					potential optimizations
				</td>
			</tr>
			<tr>
				<td class="issue">
					(Remote) Management model?
				</td>
				<td class="box">
					The environment is managed through
					services in the service registry. This is
					extensively supported.
				</td>
			</tr>
			<tr>
				<td class="issue">
					Boot time issues?
				</td>
				<td class="box">
					Supports lazy resolving and
					has "start-levels", allowing fine
					grain control over booting.
				</td>
			</tr>
			<tr>
				<td class="issue">
					Plugin-to-Plugin collaboration?
				</td>
				<td class="box">
					Yes, through packages and
					service registry.
				</td>
			</tr>
			<tr>
				<td class="issue">
					Native code?<br>
					(E.g. thw SWT dll)
				</td>
				<td class="box">
					A dynamic plugin can contain native
					libraries for different platforms. Manifest
					headers for OS, OS version, and preferred 
					language are used to load the right library
					in memory.
				</td>
			</tr>
			<tr>
				<td class="issue">
					Issues?
				</td>
				<td class="box">
					Isolation is not perfect. If plugins
					are not well programmed they may prevent
					garbage collection.
				</td>
			</tr>
			<tr>
				<td class="issue">
					Equinox Applicability?
				</td>
				<td class="box">
					Seems very suitable to start with
				</td>
			</tr>
			<tr>
				<td class="issue">
					Licensing?
				</td>
				<td class="box">
					Freely downloadable from the web site without
					click through license. Can be freely implemented
					with the standard disclaimers).
				</td>
			</tr>
			<tr>
				<td class="issue">
					Implementations?
				</td>
				<td class="box">
					<ul>
						<li>4D Home</li>
						<li>Acunia</li>
						<li>Atinav</li>
						<li>Connected Systems</li>
						<li>Espial</li>
						<li>e-Tango (open source?)</li>
						<li>Gatespace</li>
						<li>IBM</li>
						<li>Melco</li>
						<li>OSCAR (open source)</li>
						<li>ProSyst</li>
						<li>Samsung</li>
						<li>Sun Microsystems</li>
						<li>VDO</li>
					</ul>
				</td>
			</tr>
			<tr>
				<td class="issue">
					Links
				</td>
				<td class="box">
					<a href="http://www.osgi.org">www.osgi.org (main web site)</a>
					<a href="http://membercvs.osgi.org">membercvs.osgi.org For members only</a>
				</td>
			</tr>
			<tr>
				<td class="issue">
					Equinox Applicability?
				</td>
				<td class="box">
					Seems very suitable to start with
				</td>
			</tr>
			<tr>
				<td class="issue">
					How to get started?
				</td>
				<td class="box">
					An existing open source OSGi implementation could
					be used to start with (OSCAR, eTango) or IBM could be asked
					if it wants to open source SMF? We then have to see if
					static-plugins can be adapted to dynamic-bundles.
				</td>
			</tr>
		</table>
		
	</body>
</html>